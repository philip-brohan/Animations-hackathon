<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How to reproduce and extend this work &#8212; Video Diagnostics</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css?v=34905f61" />
    <script src="_static/documentation_options.js?v=d45e8c67"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Authors and acknowledgements" href="credits.html" />
    <link rel="prev" title="Make all the frames and combine into a video" href="visualizations/Downscaling_3hrly/video.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="credits.html" title="Authors and acknowledgements"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="visualizations/Downscaling_3hrly/video.html" title="Make all the frames and combine into a video"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Video Diagnostics</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">How to reproduce and extend this work</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="how-to-reproduce-and-extend-this-work">
<h1>How to reproduce and extend this work<a class="headerlink" href="#how-to-reproduce-and-extend-this-work" title="Link to this heading">¶</a></h1>
<p>This project is designed to be easy to reproduce and extend. Everything involved is kept under version control in a <a class="reference external" href="https://en.wikipedia.org/wiki/Git">git repository</a>. The repository is hosted on <a class="reference external" href="https://github.com/">GitHub</a> (and the documentation made with <a class="reference external" href="https://pages.github.com/">GitHub Pages</a>). The repository is <a class="reference external" href="https://github.com/philip-brohan/Animations-hackathon">https://github.com/philip-brohan/Animations-hackathon</a>. This repository contains everything you need to reproduce or extend this work.</p>
<p>If you are familiar with GitHub, you already know what to do (fork or clone <a class="reference external" href="https://github.com/philip-brohan/Animations-hackathon">the repository</a>): If you’d prefer not to bother with that, you can download the whole thing as <a class="reference external" href="https://github.com/philip-brohan/Animations-hackathon/archive/master.zip">a zip file</a>.</p>
<p>As well as downloading the software, some setup is necessary to run it successfully:</p>
<p>These scripts need to know where to put their output files. They rely on an environment variable <code class="docutils literal notranslate"><span class="pre">SCRATCH</span></code> - set this variable to a directory with plenty of free disc space.</p>
<p>These scripts will only work in a <a class="reference external" href="https://www.python.org/">python</a> environment with the appropriate python version and libraries available. I use <a class="reference external" href="https://docs.conda.io/en/latest/">conda</a> to manage the required python environment - which is specified in a yaml file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">name</span><span class="p">:</span> <span class="n">AnimH</span>
<span class="n">channels</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span>
<span class="n">dependencies</span><span class="p">:</span>
  <span class="c1"># Basics</span>
  <span class="o">-</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.12</span> <span class="c1"># </span>
  <span class="o">-</span> <span class="n">libwebp</span><span class="o">&gt;=</span><span class="mf">1.3.2</span> <span class="c1"># Earlier versions have a security vulnerability</span>
  <span class="o">-</span> <span class="n">pandas</span><span class="o">&gt;=</span><span class="mf">2.0</span>
  <span class="o">-</span> <span class="n">iris</span><span class="o">=</span><span class="mf">3.12</span>
  <span class="o">-</span> <span class="n">black</span>
  <span class="c1">#- iris-grib # CDS was down when I started on this, so I used pre-downloaded</span>
  <span class="c1">#- ncl      # Grib versions of the ERA5 data instead.</span>
  <span class="c1"># Vizualisation</span>
  <span class="o">-</span> <span class="n">matplotlib</span><span class="o">=</span><span class="mf">3.10</span>
  <span class="o">-</span> <span class="n">cmocean</span><span class="o">=</span><span class="mf">4.0</span>
  <span class="c1"># Video creation</span>
  <span class="o">-</span> <span class="n">ffmpeg</span><span class="o">=</span><span class="mf">7.1</span>
  <span class="c1"># Get data from ERA5</span>
  <span class="c1"># You&#39;ll need to register, see https://cds.climate.copernicus.eu/api-how-to</span>
  <span class="o">-</span> <span class="n">cdsapi</span><span class="o">&gt;=</span><span class="mf">0.7.2</span>
  <span class="c1"># Optional - documentation generator</span>
  <span class="o">-</span> <span class="n">sphinx</span>

<span class="c1"># Tell python to look for modules in the root directory of the project</span>
<span class="c1"># (A hack, needs to be edited for every installation, but makes code</span>
<span class="c1">#  management much easier.)</span>
<span class="c1"># Replace with the path to your project directory root.</span>

<span class="n">variables</span><span class="p">:</span>
  <span class="n">PYTHONPATH</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">philip</span><span class="o">.</span><span class="n">brohan</span><span class="o">/</span><span class="n">Projects</span><span class="o">/</span><span class="n">Animations</span><span class="o">-</span><span class="n">hackathon</span>

</pre></div>
</div>
<p>Install <a class="reference external" href="https://docs.conda.io/en/latest/">anaconda or miniconda</a>, <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/getting-started.html#managing-envs">create and activate the environment in that yaml file</a>, and all the scripts in this repository should run successfully. In principle this should work on any operating system and machine architecture (if all the required dependencies are available for your system - you may need to specify appropriate <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/concepts/channels.html">conda channels</a> as well) - but I have only tested it on Linux/Intel/Nvidia.</p>
<p>The project documentation (these web pages) are included in the repository (in the <a class="reference external" href="https://github.com/philip-brohan/Animations-hackathon/tree/master/docs">docs directory</a>). The documentation is in <a class="reference external" href="https://en.wikipedia.org/wiki/ReStructuredText">reStructuredText</a> format, and uses the <a class="reference external" href="https://docs.readthedocs.io/en/stable/intro/getting-started-with-sphinx.html">Sphinx</a> documentation generator.</p>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo of Video Diagnostics"/>
            </a></p>
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="visualizations/ERA5/index.html">Near-surface temperature, wind, and precipitation. From the ERA5 Reanalysis</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="visualizations/ERA5/index.html">ERA5 weather</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualizations/SyCLoPS/index.html">SyCLoPS weather events</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualizations/SyCLoPS%2BERA5/index.html">SyCLoPS events &amp; ERA5 weather</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualizations/Downscaling_diffusion/index.html">Downscaling: Diffusion model</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualizations/Downscaling_UNet/index.html">Downscaling: UNet model</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualizations/Downscaling_3hrly/index.html">Downscaling: 3-hourly data</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to reproduce or extend this work</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Authors and acknowledgements</a></li>
</ul>
<h3><a href="https://github.com/philip-brohan/Animations-hackathon">Get the code</a></h3>

<ul>
<li><a href="https://github.com/philip-brohan/Animations-hackathon"
           rel="nofollow">Github repository</a></li>
<li><a href="https://github.com/philip-brohan/Animations-hackathon/archive/master.zip"
           rel="nofollow">Zip file</a></li>
</ul>

<h3>Found a bug, or have a suggestion?</h3>

Please <a href="https://github.com/philip-brohan/Animations-hackathon/issues/new">raise an issue</a><br>or <a href="mailto://philip.brohan@metoffice.gov.uk">contact Philip</a>.
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="credits.html" title="Authors and acknowledgements"
             >next</a></li>
        <li class="right" >
          <a href="visualizations/Downscaling_3hrly/video.html" title="Make all the frames and combine into a video"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Video Diagnostics</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">How to reproduce and extend this work</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    </div>
  </body>
</html>